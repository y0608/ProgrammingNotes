# Файлови системи

![[15.02.2023 - Теория 2023-05-12 10.06.10.excalidraw]]

## Meta info
- тип на fs-> htfs; razerfs; zfs; ext4; ext3; ext2;
- Data Block size -> колко байта минимум ще изхабим за файл
- inode table -> таблица от inode-ове


## Inode
inode - структура от данни, която еднозначно описва файл

От гледна точка на ОС всички файлове са inode-ове

характеристика:
![[15.02.2023 - Теория 2023-05-12 10.21.43.excalidraw|1000]]


### Content table

![[15.02.2023 - Теория 2023-05-12 10.37.55.excalidraw]]
Всички елементи са номера на datablock-ове от DB table
- В един DB може да има инфо **само** за един файл
- Номерата на DB не е нужно да са последователни
- Един номер на DB се записва в 4 байта ^936100


##### Първите 10 елемента 
Номера на DB, в които се съхранява информацията на файла (тук db size е много важен за performance)

пример:
![[15.02.2023 - Теория 2023-05-12 11.10.36.excalidraw|500]]


##### 11тият елемент - 0RDB(Zero Reference Data Block)
Сочи към други DB-ове, в които се съдържа файлът.

![[15.02.2023 - Теория 2023-05-12 11.21.59.excalidraw]]


##### 12тият елемент - 1RDB
Едно ниво нагоре от 11тия. Сочи към DB, които съдържат други DB, в които е съдържанието на файла

![[15.02.2023 - Теория 2023-05-12 11.37.42.excalidraw]]


##### 13тият елемент - 2RDB
Едно ниво нагоре от 12тия. Сочи към DB, които съдържат други DB, които съдържат други DB, в които е съдържанието на файла

![[15.02.2023 - Теория 2023-05-12 11.38.47.excalidraw]]

Общо:
`10*512 + 128*512 + 128*128*512 + 128*128*128*512 = 4 TB`
512 -> size

512/4 = 128 -> брой на елементите
![[15.02.2023 - Теория#^936100]]



# Права за достъп

## За файлове:
- r -> read
- w -> write
- e -> execute

## Репрезентация

#### Символна
| owner | group | other |
| :----:| :----:| :----:|
|  rwx  |  rwx  |  rwx  |
|  ---  |  ---  |  ---  |

пример: `rw-|r-x|---`
|     owner      |      group       |  other  |
|:--------------:|:----------------:|:-------:|
|      rw-       |       r-x        |   ---   |
| read and write | read and execute | nothing |



#### Числова
|     | R   | W   | X   | binary |
| --- | --- | --- | --- | ------ |
| 7   | r   | w   | x   | 111    |
| 6   | r   | w   | -   | 110    |
| 5   | r   | -   | x   | 101    |
| 4   | r   | -   | -   | 100    |
| 3   | -   | w   | x   | 011    |
| 2   | -   | w   | -   | 010    |
| 1   | -   | -   | x   | 001    |
| 0   | -   | -   | -   | 000    |

пример:
136
|   1   |   3   |   6   |
|:-----:|:-----:|:-----:|
| owner | group | other | 
|  --x  |  -wx  |  rw-  |